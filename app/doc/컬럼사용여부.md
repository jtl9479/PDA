# 컬럼 사용 여부 판단 기준

## 1. 사용 여부 판단 기준 (4가지)

| 번호 | 기준 | 설명 | 확인 위치 |
|------|------|------|----------|
| 1 | **화면 UI 노출** | 앱 화면에 데이터 표시 | Activity, Adapter의 setText() 등 |
| 2 | **VIEW 내부 사용** | 서버 VIEW/JSP에서 WHERE, JOIN, 계산 등에 사용 | JSP 파일, VIEW SQL |
| 3 | **안드로이드 소스 사용** | 앱에서 분기, 계산, 서버 전송 등에 사용 | Java 소스 전체 |
| 4 | **DDL 사용** | 서버 DB INSERT/UPDATE 대상 컬럼 | JSP 파일의 INSERT, UPDATE 문 |

---

## 2. 각 기준별 상세

### 2.1 화면 UI 노출
앱 화면에 데이터가 표시되는 경우

| 확인 항목 | 예시 |
|----------|------|
| TextView 표시 | `setText(item.getITEM_NAME())` |
| ListView/RecyclerView 바인딩 | Adapter에서 데이터 바인딩 |
| Dialog 표시 | AlertDialog에 데이터 표시 |
| Toast 메시지 | Toast로 데이터 표시 |

### 2.2 VIEW 내부 사용
서버 VIEW 또는 JSP에서 단순 SELECT/전송 외에 실제 사용되는 경우

| 확인 항목 | 예시 |
|----------|------|
| WHERE 조건 | `WHERE ITEM_TYPE = 'W'` |
| JOIN 키 | `ON A.GI_D_ID = B.GI_D_ID` |
| 계산/가공 | `SUM(QTY)`, `CONCAT()` |
| CASE 분기 | `CASE WHEN ... THEN ...` |
| ORDER BY | `ORDER BY ITEM_CODE` |
| GROUP BY | `GROUP BY CLIENT_CODE` |

### 2.3 안드로이드 소스 사용
앱 Java 소스에서 단순 파싱/저장/조회 외에 실제 사용되는 경우

| 확인 항목 | 예시 |
|----------|------|
| 조건 분기 | `if (item.getITEM_TYPE().equals("W"))` |
| 계산/가공 | `total = qty * price` |
| 서버 전송 | API 요청 파라미터로 전송 |
| 비교/검증 | `if (qty > 0)` |
| 문자열 조합 | 바코드 생성 시 사용 |

### 2.4 DDL 사용
JSP 파일에서 서버 DB에 INSERT/UPDATE하는 컬럼인 경우

| 확인 항목 | 예시 |
|----------|------|
| INSERT 문 | `INSERT INTO W_GOODS_ID (GI_D_ID, ...) VALUES (?, ...)` |
| UPDATE 문 | `UPDATE W_GOODS_ID SET QTY = ? WHERE GI_D_ID = ?` |
| 서버 DB 저장 | JSP에서 앱 데이터를 서버 DB에 저장 |

---

## 3. 판단 프로세스

```
┌─────────────────────────────────────────────────────────┐
│  STEP 0: [엑셀시트명].[컬럼명] 질문 수신                 │
 |   앞으로 컬럼명만 전송하면 (예: ITEM_CODE) 이전에 분석했던 VIEW와 동일한 VIEW로
     간주해달라.
└─────────────────────────────────────────────────────────┘
                          │
                          ▼
┌─────────────────────────────────────────────────────────┐
│  STEP 1: 엑셀 시트 확인                                 │
│  - PDA VIEW SQL_20251031.xlsx에서 컬럼 존재 확인       │
└─────────────────────────────────────────────────────────┘
                          │
                          ▼
┌─────────────────────────────────────────────────────────┐
│  STEP 2: VIEW 내부 사용 확인                            │
│  - JSP 파일에서 WHERE, JOIN, 계산 등 사용 여부         │
│  - VIEW SQL에서 사용 여부                               │
└─────────────────────────────────────────────────────────┘
                          │
                          ▼
┌─────────────────────────────────────────────────────────┐
│  STEP 3: 안드로이드 소스 사용 확인                      │
│  - Java 파일에서 컬럼명/getter 검색                     │
│  - 분기, 계산, 서버 전송 등 실제 사용 여부             │
└─────────────────────────────────────────────────────────┘
                          │
                          ▼
┌─────────────────────────────────────────────────────────┐
│  STEP 4: 화면 UI 노출 확인                              │
│  - Activity, Adapter에서 setText() 등 사용 여부        │
└─────────────────────────────────────────────────────────┘
                          │
                          ▼
┌─────────────────────────────────────────────────────────┐
│  STEP 5: DDL 사용 확인                                  │
│  - JSP 파일에서 INSERT 문 사용 여부                    │
│  - JSP 파일에서 UPDATE 문 사용 여부                    │
└─────────────────────────────────────────────────────────┘
                          │
                          ▼
┌─────────────────────────────────────────────────────────┐
│  STEP 6: 결과 정리                                      │
│  - 4가지 기준별 사용 여부 정리                          │
│  - 사용 위치 (파일명:라인번호) 명시                     │
└─────────────────────────────────────────────────────────┘
```

---

## 4. 결과 문서화 양식

| 컬럼명 | UI 노출 | VIEW 내부 | 안드로이드 소스 | DDL 사용 |
|--------|---------|-----------|-----------------|----------|
| GI_H_ID | | | | |
| ITEM_CODE | ● | ● | ● | |
| ITEM_TYPE | | ● | ● | |
| GI_QTY | | | | ● |

**범례:**
- ●: 사용
- 빈칸: 미사용

---

## 5. 사용 여부 판단 체크리스트

### 필수 확인 항목
- [ ] 엑셀 시트에서 컬럼 존재 확인
- [ ] JSP/VIEW에서 WHERE, JOIN, 계산 등 사용 확인
- [ ] Java 소스에서 분기, 계산, 서버 전송 등 사용 확인
- [ ] Activity/Adapter에서 UI 표시 사용 확인
- [ ] JSP 파일에서 INSERT/UPDATE 문 사용 확인 (DDL)
- [ ] 위 항목을 정확하게 수행했는지 재확인

---

## 6. 결과 작성 형식

```
### [컬럼명]

#### 1. UI 노출: [O / X]
- (사용 시) ShipmentActivity.java:1573 setText()

#### 2. VIEW 내부 사용: [O / X]
- (사용 시) search_shipment.jsp:52 WHERE 조건
- (사용 시) VW_PDA_WID_LIST JOIN 키

#### 3. 안드로이드 소스 사용: [O / X]
- (사용 시) ShipmentActivity.java:916 if 분기
- (사용 시) ShipmentActivity.java:3370 서버 전송

#### 4. DDL 사용: [O / X]
- (사용 시) insert_goods_wet.jsp:45 INSERT 문
- (사용 시) update_shipment.jsp:32 UPDATE 문

#### 5. 비즈니스 영향: [있음 / 없음]
- (영향 있을 시) 영향 내용 설명
- (영향 없을 시) **제거해도 비즈니스 기능에 영향 없음**

#### 6. 수정 위치
| 파일 | 라인 | 수정 내용 |
|------|------|-----------|
| search_shipment.jsp | 43 | SELECT 문에서 컬럼 제거 |
| ProgressDlgShipSearch.java | 157 | temp[n] 파싱 제거, 인덱스 조정 |
| DBHandler.java | 47 | 로컬 DB 스키마에서 컬럼 제거 |
| DBHandler.java | 705 | INSERT 문에서 컬럼 제거 |
| DBHandler.java | 111, 232, 336 | SELECT 문에서 컬럼 제거 |
| Shipments_Info.java | - | 필드, getter/setter 제거 |
| DBInfo.java | - | 상수 제거 |
```

---

## 7. 참고사항

### 7.1 DDL 사용 확인 방법
- JSP 파일에서 INSERT 문에 컬럼이 포함되면 **DDL 사용: O**
- JSP 파일에서 UPDATE 문에 컬럼이 포함되면 **DDL 사용: O**

### 7.2 단순 경유는 UI/VIEW내부/안드로이드소스 "사용"에 미포함
| 경유 유형 | 설명 |
|----------|------|
| JSP SELECT/전송만 | VIEW에서 조회 후 앱으로 전송만 |
| 앱 파싱/저장만 | 서버 응답 파싱 후 로컬 DB 저장만 |
| 로컬 SELECT만 | 로컬 DB에서 조회만 하고 활용 없음 |


## 8. 최종

### 해당 컬럼의 존재 유무로 인하여 프로그램 비지니스에서 지장이 없는지
안드로이드, jsp 전체적으로 확인하라